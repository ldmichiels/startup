<!DOCTYPE html>
<html>
	<head>
    	<meta charset="utf-8" />
    	<title> Backbone :: Topic 6 :: Bootcamp HTML5</title>
    	<meta name="viewport" content="width=device-width, initial-scale=1"> 		
		<!-- jQuery -->		
		<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
		<!-- Import Backbone -->
    	<script type="text/javascript" src="script/underscore.js"></script>
    	<script type="text/javascript" src="script/backbone.js"></script>
    	
  
	</head>
	<body id="principal">

		<div id="content">
			<p>La primera Pelicula edita el messagge ademas de los datos, es por eso q se muestra.<br>La segunda instancia no lo hace</p>
		</div>

		<script>
			//window.onload = function(){

					//Creo mi modelo Sidebar extendiendo de Backbone.Model
 					var Movie = Backbone.Model.extend({

 						  title : ""
 						, director : ""
 						, year : ""
 						, punctuation : ""
 						, message : "Enjoy it!"

 						, setPunctuation: function(num) {
 							this.set({ punctuation: num })
 							}

						, setName: function(movieName) {
					    	this.set({ title: movieName });					    						    	
					  		}

					  	, setDirector: function(movieDirec){
						  	this.set({ director: movieDirec });
						  }

						, setYear: function(movieYear){
						  	this.set({ director: movieYear });
						  }
					});

					//creo instancias del modelo Movie
					window.scarface = new Movie;
					window.godafather = new Movie;

					//avisa a las vistas cuando ocurra un cambio
					scarface.on('change:title', function(model, title) {
						$('#content').append('<h1>'+title+'</h1>');
					})
					.on('change:director', function(model, director){
						$('#content').append('<h3>'+director+'</h3>');
					})
					.on('change:year', function(model, year){
						$('#content').append('<h3>'+year+'</h3>');
					})
					.on('change:punctuation', function(model, punctuation) {
						$('#content').append('<h2>'+punctuation+'</h2>')
					})
					.on('change:message', function(model, message){
						$('#content').append('<h4>'+message+'</h4>')
					});
					
					godafather.on('change:title', function(model, title) {
						$('#content').append('<h1>'+title+'</h1>');
					})
					.on('change:director', function(model, director){
						$('#content').append('<h3>'+director+'</h3>');
					})
					.on('change:year', function(model, year){
						$('#content').append('<h3>'+year+'</h3>');
					})
					.on('change:punctuation', function(model, punctuation) {
						$('#content').append('<h2>'+punctuation+'</h2>')
					})
					.on('change:message', function(model, message){
						$('#content').append('<h4>'+message+'</h4>')
					});

					//Realizar cambios para Testear
					scarface.set({silent: true, title: 'Scarface', director: 'Brian de Palma', year: '1983', punctuation: '8.3', message: "Very Nice Film!"});

					godafather.setName("The Godafather");	
					godafather.setDirector("Francis Ford Coppola");
					godafather.setYear("1972");
					godafather.setPunctuation("9.2");


					//Prueba de vistas
					var ItemView = Backbone.View.extend({
					  tagName: 'li'
					});

					var BodyView = Backbone.View.extend({
					  el: 'body'
					});

					var item = new ItemView();
					var body = new BodyView();

					alert(item.el + ' ' + body.el);

					var Bookmark = Backbone.View.extend({
					  render: function() {
					    $(this.el).html(this.template(this.model.toJSON()));
					    return this;
					  }
					});

					Bookmark.render

			//}//window.onload
		</script>

	</body>
</html>